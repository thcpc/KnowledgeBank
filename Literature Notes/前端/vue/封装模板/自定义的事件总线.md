
```js
  
  
import { reactive, readonly } from 'vue';  
  
const state = reactive({  
    events: new Map()  
});  
  
const emit = (event, payload) => {  
    const callbacks = state.events.get(event);  
    if (callbacks) {  
        callbacks.forEach(callback => callback(payload));  
    }  
};  
  
const on = (event, callback) => {  
  
    const callbacks = state.events.get(event);  
    if (!callbacks) {  
        state.events.set(event, [callback]);  
    } else {  
        callbacks.push(callback);  
    }  
  
    return () => {  
        off(event, callback);  
    };  
};  
  
const off = (event, callback) => {  
    const callbacks = state.events.get(event);  
    if (callbacks) {  
        const index = callbacks.indexOf(callback);  
        if (index !== -1) {  
            callbacks.splice(index, 1);  
        }  
    }  
};  
  
export const EventBus = {  
    $on: on,  
    $emit: emit,  
    $off: off,  
    // 提供一个只读的 state，用于在严格模式下避免直接修改  
    $state: readonly(state)  
};  
  
export default EventBus;
```

## 使用指南
1. 在组件中注册和定义事件
``` js
const refresh = (pageNo)=>{......}
onMounted(() => {  
  // 注册一个事件  
  eventBus.$on('refresh-document-list', refresh)  
})
```
2. 在触发处调用
```js
// 1 为pageNo 参数
onclick=()=> {
	eventBus.$emit('refresh-document-list', 1)
}
```
